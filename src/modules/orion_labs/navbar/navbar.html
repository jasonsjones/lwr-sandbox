<template>
    <header class="px-8 py-4 bg-indigo-900 text-gray-200">
        <div class="flex">
            <orion_labs-link navigate-to={homePage}>
                <div class="flex flex-col items-end cursor-pointer">
                    <div class="text-3xl font-bold uppercase hover:text-white">Orion</div>
                    <div
                        class="-mr-2 px-2 text-lg text-white font-semibold bg-indigo-400 rounded-full"
                    >
                        labs
                    </div>
                </div>
            </orion_labs-link>
            <div class="hidden md:flex flex-1 items-center gap-x-16 px-24">
                <orion_labs-nav-link navigate-to={aboutPage}>About</orion_labs-nav-link>
                <orion_labs-nav-link navigate-to={userListPage}>Users</orion_labs-nav-link>

                <div class="flex flex-1 justify-end items-center gap-x-8">
                    <template if:false={isAuthenticated}>
                        <orion_labs-nav-link navigate-to={loginPage}>Login</orion_labs-nav-link>
                    </template>

                    <p if:true={isAuthenticated}>{user.name}</p>
                    <!-- Logout button -->
                    <button
                        if:true={isAuthenticated}
                        class="p-2 border-2 border-indigo-500 rounded-md hover:bg-indigo-800"
                        onclick={handleLogout}
                    >
                        Logout
                    </button>
                </div>
            </div>

            <!-- The svg button (menu or 'x') displayed on small screens -->
            <button
                class="flex flex-1 justify-end items-center pr-12 md:hidden"
                type="button"
                onclick={toggleMobileMenu}
            >
                <svg viewBox="0 0 20 20" fill="currentColor" class="w-8 h-8 fill-current">
                    <path
                        if:false={isMobileMenuOpen}
                        fill-rule="evenodd"
                        d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                        clip-rule="evenodd"
                    ></path>
                    <path
                        if:true={isMobileMenuOpen}
                        fill-rule="evenodd"
                        d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                        clip-rule="evenodd"
                    ></path>
                </svg>
            </button>

            <!-- octo-cat-link here -->
            <a
                href="https://github.com/jasonsjones/lwr-sandbox"
                class=""
                aria-label="View source on GitHub"
                target="_blank"
                rel="noopener"
            >
                <svg
                    xmlns="https://www.w3.org/2000/svg"
                    viewBox="0 0 250 250"
                    class="octo-cat"
                    style="position: absolute; top: 0; border: 0; right: 0"
                    width="65"
                    height="65"
                    aria-hidden="true"
                >
                    <path d="M0 0l115 115h15l12 27 108 108V0z"></path>
                    <path
                        style="transform-origin: 130px 106px"
                        fill="currentColor"
                        d="M128 109c-14-9-9-19-9-19 3-7 2-11 2-11-2-7 2-3 2-3 4 5 3 11 3 11-3 11 5 15 8 16"
                        class="octo-arm"
                    ></path>
                    <path
                        fill="currentColor"
                        d="M115 115s4 2 5 0l14-13c3-3 6-4 8-3-8-11-14-25 2-41 5-5 10-7 16-7 0-2 3-7 11-11 0 0 5 3 8 16a59 59 0 0 1 21 22c14 2 16
                7 16 7-3 8-9 11-11 12 0 5-2 11-7 16-16 16-30 10-40 1 0 3-1 7-5 11l-12 12c-1 1 1 5 1 5z"
                        class="octo-body"
                    ></path>
                </svg>
            </a>
        </div>

        <!-- Mobile drop down menu -->
        <nav
            if:true={isMobileMenuOpen}
            class="md:hidden w-80 flex flex-col items-end mt-8 mb-4 gap-y-4 absolute bg-indigo-900 top-12 right-0 z-10 p-8 rounded-md h-screen animate-slide-in-left"
            data-id="mobile-menu"
        >
            <orion_labs-nav-link navigate-to={aboutPage}>About</orion_labs-nav-link>
            <orion_labs-nav-link navigate-to={userListPage}>Users</orion_labs-nav-link>
            <template if:false={isAuthenticated}>
                <orion_labs-nav-link navigate-to={loginPage}>Login</orion_labs-nav-link>
            </template>

            <!-- Logout button -->
            <button
                if:true={isAuthenticated}
                class="p-2 border-2 border-indigo-500 rounded-md hover:bg-indigo-800"
                onclick={handleLogout}
            >
                Logout
            </button>
        </nav>
    </header>
</template>
